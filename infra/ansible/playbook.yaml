---
- name: Deploy NATS to Kubernetes
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - name: Add NATS Helm repository
      kubernetes.core.helm_repository:
        name: nats
        repo_url: https://nats-io.github.io/k8s/helm/charts/

    - name: Create nats namespace
      kubernetes.core.k8s:
        kind: Namespace
        name: nats
        state: present

    - name: Deploy NATS via Helm
      kubernetes.core.helm:
        name: nats
        chart_ref: nats/nats
        release_namespace: nats
        create_namespace: true
        values:
          config:
            cluster:
              enabled: false
            jetstream:
              enabled: false
